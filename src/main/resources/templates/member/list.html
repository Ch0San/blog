<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>회원 목록</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <style>
    /* 목록 테이블은 가급적 1줄 표시: 글자 크기 축소 + 줄바꿈 방지 */
    .member-list-table th,
    .member-list-table td {
      white-space: nowrap;
      font-size: 13px;
    }

    .member-list-table th {
      font-weight: 600;
    }
  </style>
</head>

<body>
  <div th:replace="~{fragments/header :: header('member')}"></div>

  <main class="container" style="padding-top:28px;padding-bottom:40px">
    <section class="card" style="overflow-x:auto">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
        <h2 style="margin:0">회원 목록</h2>
        <div style="color:var(--muted);font-size:14px">총 <strong
            th:text="${members != null ? members.size() : 0}">0</strong>명</div>
      </div>

      <table class="member-list-table" style="width:100%;border-collapse:collapse">
        <thead>
          <tr style="background:#f7f7f8;color:#555;text-align:left">
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">ID</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">아이디</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">닉네임</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">이메일</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">전화번호</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">주소</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">권한</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">가입일</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea">상태</th>
            <th style="padding:10px 12px;border-bottom:1px solid #eaeaea;text-align:right">관리</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="m : ${members}">
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.id}">1</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.username}">admin</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.nickname}">관리자</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.email}">admin@example.com</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.phoneNumber}">010-1234-5678</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.address}">서울</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2" th:text="${m.role}">ADMIN</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2"
              th:text="${#temporals.format(m.createdAt, 'yyyy-MM-dd HH:mm')}">2025-10-27</td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2">
              <span th:text="${m.active} ? '활성' : '비활성'">활성</span>
            </td>
            <td style="padding:10px 12px;border-bottom:1px solid #f0f0f2;text-align:right;white-space:nowrap">
              <a th:href="@{'/member/admin/edit/' + ${m.id}}" class="btn btn-secondary"
                style="padding:6px 10px;font-size:12px">수정</a>
              <form th:action="@{'/member/admin/delete/' + ${m.id}}" method="post" style="display:inline"
                onsubmit="return confirm('정말 삭제하시겠습니까?');">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-danger"
                  style="padding:6px 10px;font-size:12px;margin-left:6px">탈퇴</button>
              </form>
            </td>
          </tr>
          <tr th:if="${#lists.isEmpty(members)}">
            <td colspan="10" style="text-align:center;padding:40px 12px;color:var(--muted)">회원이 없습니다.</td>
          </tr>
        </tbody>
      </table>

      <div style="margin-top:16px">
        <a href="/" class="btn btn-secondary">메인으로</a>
      </div>
    </section>
  </main>

  <div th:replace="~{fragments/footer :: footer}"></div>
</body>

</html>